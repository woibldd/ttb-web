{"source":"webpackJsonp([29],{\"9mmZ\":function(e,t){},NByh:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(\"Dd8w\"),s=n.n(r),o=n(\"Xxa5\"),i=n.n(o),a=n(\"exGp\"),l=n.n(a),u=n(\"+m19\"),c=n(\"30IV\"),_=n(\"j3T7\"),d=n(\"6lib\"),v=n(\"36He\"),f={name:\"SafeVerified\",components:{VBtn:c.a,countDown:v.a},data:function(){return{state:_.c,google_key:\"\",code:\"\",checkbox1:!1,checkbox2:!1,verifyCode:\"\"}},computed:{username:function(){return this.state.userInfo?this.state.userInfo.phone||this.state.userInfo.email:\"\"},resetCode:function(){return this.$route.query.reset},verify_phone:function(){return!(!_.c.userInfo||!_.c.userInfo.verify_phone)},verify_email:function(){return!(!_.c.userInfo||!_.c.userInfo.verify_email)},verify_type:function(){var e=\"\";return this.verify_phone?e=\"phone\":this.verify_email&&(e=\"email\"),e}},created:function(){var t=this;return l()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.getGoogleKey();case 1:case\"end\":return e.stop()}},e,t)}))()},methods:{currentGetCodeFunc:function(){var n=this;return l()(i.a.mark(function e(){var t,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(\"phone\"===n.verify_type)return e.next=3,u.a.getPhoneCode({region:_.c.userInfo.region,phone:_.c.userInfo.phone});e.next=7;break;case 3:(t=e.sent).code&&d.a.alert(t.message),e.next=11;break;case 7:return e.next=9,u.a.getEmailCode({email:_.c.userInfo.email});case 9:(r=e.sent).code&&d.a.alert(r.message);case 11:case\"end\":return e.stop()}},e,n)}))()},getGoogleKey:function(){var n=this;return l()(i.a.mark(function e(){var t,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.getGoogleKey();case 2:(t=e.sent)&&!t.code?(n.google_key=t.data.google_key,r=\"otpauth://totp/\"+n.username+\"?secret=\"+n.google_key+\"&issuer=\"+location.hostname,n.setQr(r)):d.a.alert(t.message);case 4:case\"end\":return e.stop()}},e,n)}))()},setQr:function(t){var r=this;return l()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(82).then(n.bind(null,\"71e1\"));case 2:e.sent.toCanvas(r.$refs.qr,t,{margin:0,width:140,height:140,errorCorrectionLevel:\"H\"},function(e){if(e)return d.a.log(\"qrcode error\");r.qrReady=!0});case 4:case\"end\":return e.stop()}},e,r)}))()},submit:function(){var c=this;return l()(i.a.mark(function e(){var t,r,n,o,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t={},t=\"phone\"===c.verify_type?{phone_code:c.verifyCode}:{email_code:c.verifyCode},!c.resetCode){e.next=27;break}if(!c.checkbox1||!c.checkbox2){e.next=23;break}if(6===c.code.length)return r=s()({google_key_type:\"reset\",google_key:c.google_key,code:c.code},t),e.next=8,u.a.bindGoogleKey(r);e.next=19;break;case 8:if((n=e.sent)&&!n.code)return e.next=12,_.a.updateSession();e.next=16;break;case 12:c.$router.push({name:\"Safety\"}),window.localStorage.setItem(\"refere\",!0),e.next=17;break;case 16:d.a.alert(n.message);case 17:e.next=21;break;case 19:return d.a.alert(c.$i18n.t(\"invalid_google_code\")),e.abrupt(\"return\",!1);case 21:e.next=25;break;case 23:return d.a.alert(c.$i18n.t(\"err_check_google_code\")),e.abrupt(\"return\",!1);case 25:e.next=49;break;case 27:if(!c.checkbox1||!c.checkbox2){e.next=47;break}if(6===c.code.length)return o=s()({google_key:c.google_key,code:c.code},t),e.next=32,u.a.bindGoogleKey(o);e.next=43;break;case 32:if((a=e.sent)&&!a.code)return e.next=36,_.a.updateSession();e.next=40;break;case 36:c.$router.push({name:\"Safety\"}),window.localStorage.setItem(\"refere\",!0),e.next=41;break;case 40:d.a.alert(a.message);case 41:e.next=45;break;case 43:return d.a.alert(c.$i18n.t(\"invalid_google_code\")),e.abrupt(\"return\",!1);case 45:e.next=49;break;case 47:return d.a.alert(c.$i18n.t(\"err_check_google_code\")),e.abrupt(\"return\",!1);case 49:case\"end\":return e.stop()}},e,c)}))()}}},g={render:function(){var a=this,e=a.$createElement,t=a._self._c||e;return t(\"div\",{staticClass:\"profile-container\"},[t(\"div\",{staticClass:\"title-box\"},[a._v(a._s(a.$t(\"profile_left_invite_safety\"))),t(\"span\",[a._v(a._s(a.$t(\"bind_google_title\")))])]),a._v(\" \"),t(\"div\",{staticClass:\"invinfo-box\"},[t(\"p\",{staticClass:\"gt_txt\"},[a._v(a._s(a.$t(\"bind_google_title\")))]),a._v(\" \"),t(\"div\",{staticClass:\"gt_ewm\"},[t(\"div\",{staticClass:\"pd-10\",staticStyle:{background:\"#fff\",height:\"160px\",\"box-sizing\":\"border-box\"}},[t(\"canvas\",{ref:\"qr\",staticClass:\"qr-img\"})])]),a._v(\" \"),t(\"p\",{staticClass:\"gt_t\"},[a._v(a._s(a.$t(\"google_skey\")))]),a._v(\" \"),t(\"span\",{staticClass:\"gt_yz\"},[a._v(a._s(a.google_key))]),a._v(\" \"),t(\"ul\",[t(\"li\",[t(\"i\",[a._v(\"1\")]),a._v(a._s(a.$t(\"bind_google_hint_1\")))]),a._v(\" \"),t(\"li\",[t(\"i\",[a._v(\"2\")]),a._v(a._s(a.$t(\"bind_google_hint_2\")))]),a._v(\" \"),t(\"li\",[t(\"i\",[a._v(\"3\")]),a._v(a._s(a.$t(\"bind_google_hint_3\")))]),a._v(\" \"),t(\"li\",[t(\"i\",[a._v(\"4\")]),a._v(a._s(a.$t(\"bind_google_hint_4\")))])]),a._v(\" \"),t(\"p\",{staticClass:\"gt_btxt\"},[a._v(a._s(a.$t(\"confirm_please\")))]),a._v(\" \"),t(\"div\",{staticClass:\"gt_lb\"},[t(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:a.checkbox1,expression:\"checkbox1\"}],attrs:{type:\"checkbox\"},domProps:{checked:Array.isArray(a.checkbox1)?-1<a._i(a.checkbox1,null):a.checkbox1},on:{change:function(e){var t=a.checkbox1,r=e.target,n=!!r.checked;if(Array.isArray(t)){var o=a._i(t,null);r.checked?o<0&&(a.checkbox1=t.concat([null])):-1<o&&(a.checkbox1=t.slice(0,o).concat(t.slice(o+1)))}else a.checkbox1=n}}}),a._v(\" \"),t(\"label\",{attrs:{for:\"asda\"}},[a._v(a._s(a.$t(\"bind_google_confirm_1\")))])]),a._v(\" \"),t(\"div\",{staticClass:\"gt_lb\"},[t(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:a.checkbox2,expression:\"checkbox2\"}],attrs:{type:\"checkbox\"},domProps:{checked:Array.isArray(a.checkbox2)?-1<a._i(a.checkbox2,null):a.checkbox2},on:{change:function(e){var t=a.checkbox2,r=e.target,n=!!r.checked;if(Array.isArray(t)){var o=a._i(t,null);r.checked?o<0&&(a.checkbox2=t.concat([null])):-1<o&&(a.checkbox2=t.slice(0,o).concat(t.slice(o+1)))}else a.checkbox2=n}}}),a._v(\" \"),t(\"label\",{attrs:{for:\"asd\"}},[a._v(a._s(a.$t(\"bind_google_confirm_2\")))])])]),a._v(\" \"),t(\"div\",{staticClass:\"inp_box\"},[t(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:a.verifyCode,expression:\"verifyCode\"}],attrs:{type:\"text\",placeholder:\"phone\"===a.verify_type?a.$t(\"phone_code\"):a.$t(\"email_code\")},domProps:{value:a.verifyCode},on:{input:function(e){e.target.composing||(a.verifyCode=e.target.value)}}}),a._v(\" \"),t(\"div\",{staticClass:\"count-down-container\"},[t(\"count-down\",{attrs:{\"send-text\":a.$t(\"hq_send\"),\"send-code-func\":a.currentGetCodeFunc}})],1)]),a._v(\" \"),t(\"div\",{staticClass:\"inp_box\"},[t(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:a.code,expression:\"code\"}],attrs:{type:\"text\",placeholder:a.$t(\"bind_google_ph\")},domProps:{value:a.code},on:{input:function(e){e.target.composing||(a.code=e.target.value)}}})]),a._v(\" \"),t(\"div\",{staticClass:\"inp_box\"},[t(\"v-btn\",{staticClass:\"submit-btn\",attrs:{label:a.$t(\"bind\")},on:{click:a.submit}})],1)])},staticRenderFns:[]};var h=n(\"VU/8\")(f,g,!1,function(e){n(\"9mmZ\")},\"data-v-f24a6246\",null);t.default=h.exports}});"}