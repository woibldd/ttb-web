{"source":"webpackJsonp([85],{\"33by\":function(t,a,e){\"use strict\";Object.defineProperty(a,\"__esModule\",{value:!0});var n=e(\"rVsN\"),r=e.n(n),c=e(\"KH7x\"),i=e.n(c),l=e(\"lC5x\"),u=e.n(l),o=e(\"J0Oq\"),v=e.n(o),f=e(\"+m19\"),s=e(\"6lib\"),_=e(\"j3T7\"),d=e(\"ujAg\"),h=e.n(d),p={data:function(){return{open:!1,allCoins:[],selectCoin:\"BTC\",transferAmount:\"\",accountFrom:1,accountTo:2,tradingBalance:null,contractBalance:null,otcBalance:null,walletBalance:null,accountTypes:[{value:1,label:\"wallet_account\"},{value:2,label:\"trading_account\"},{value:3,label:\"contract_account\"},{value:4,label:\"otc_account\"}],accountTypes2:[]}},props:{showModal:{type:Boolean,default:!1,stateType:Number},stateType:{}},watch:{},computed:{totalBalance:function(){return this.$big(this.tradingAvai||0).plus(this.walletAvai||0).plus(this.contractAvai||0).plus(this.otcAvai||0).toFixed(8).toString()},fromAmount:function(){var t=0;switch(this.accountFrom){case 1:t=this.walletAvai;break;case 2:t=this.tradingAvai;break;case 3:t=this.contractAvai;break;case 4:t=this.otcAvai;break;default:t=0}return t},toAmount:function(){var t=0;switch(this.accountTo){case 1:t=this.walletAvai;break;case 2:t=this.tradingAvai;break;case 3:t=this.contractAvai;break;case 4:t=this.otcAvai;break;default:t=0}return t},getAvai:function(){},tradingAvai:function(){return this.tradingBalance?new h.a(this.tradingBalance.available||0).toFixed(8):0},contractAvai:function(){return this.contractBalance?new h.a(this.contractBalance.available_balance||0).toFixed(8):0},otcAvai:function(){return this.otcBalance?new h.a(this.otcBalance.available||0).toFixed(8):0},walletAvai:function(){return this.walletBalance?new h.a(this.walletBalance.available||0).toFixed(8):0}},methods:{close:function(){this.$emit(\"update:showModal\",!1),this.$emit(\"close\")},confirm:function(){var e=this;return v()(u.a.mark(function t(){var a;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.inputText(),e.transferAmount<=0)return s.a.alert(\"输入数字不合法\"),t.abrupt(\"return\");t.next=4;break;case 4:return t.next=6,f.a.transferSelf({type:1,currency:e.selectCoin,from:e.accountFrom,to:e.accountTo,amount:e.transferAmount});case 6:(a=t.sent).code?s.a.alert(a.message):(e.transferAmount=\"\",e.$emit(\"update:showModal\",!1),e.$emit(\"close\"),s.a.success(e.$t(\"transfer_success\")),e.getBalance(),f.a.getContractBalanceList().then(function(t){_.c.ct.holdingList=t.data}));case 8:case\"end\":return t.stop()}},t,e)}))()},hideModal:function(){},inputText:function(t){t=t||this.transferAmount,isNaN(parseFloat(t))&&(this.transferAmount=\"\");var a=this.$big(t||\"0\");a.lt(0)?this.transferAmount=\"0\":a.gt(this.fromAmount)&&(this.transferAmount=this.fromAmount)},getBalance:function(){var s=this;return v()(u.a.mark(function t(){var a,e,n,c,l,o;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s.selectCoin)return t.next=3,r.a.all([f.a.getBalanceByPair(s.selectCoin),f.a.getContractBalanceByPair({symbol:s.selectCoin}),f.a.getOtcBalanceByPair({symbol:s.selectCoin}),f.a.getwalletBalanceByPair({symbol:s.selectCoin})]);t.next=13;break;case 3:a=t.sent,e=i()(a,4),n=e[0],c=e[1],l=e[2],o=e[3],n&&n.length&&(s.tradingBalance=n[0]),c&&(s.contractBalance=c.data),l&&(s.otcBalance=l.data),o&&(s.walletBalance=o.data);case 13:case\"end\":return t.stop()}},t,s)}))()},getAllCoinTypes:function(){var a=this;f.a.getAccountBalanceList().then(function(t){!t.code&&t.data&&(a.allCoins=(t.data||[]).map(function(t){return t}))}),this.getBalance()},transferType:function(t){var a=this;this.transferAmount=\"\",1===t&&(this.accountTypes2=[],this.accountTo=\"\",this.accountTypes.forEach(function(t){t.value!==a.accountFrom&&a.accountTypes2.push(t)}))},fillAll:function(){this.transferAmount=this.fromAmount},changeCoin:function(t){this.accountTypes=[],this.accountTypes=\"USDT\"===t?[{value:1,label:\"wallet_account\"},{value:2,label:\"trading_account\"},{value:4,label:\"otc_account\"}]:\"BTC\"===t?[{value:1,label:\"wallet_account\"},{value:2,label:\"trading_account\"},{value:3,label:\"contract_account\"},{value:4,label:\"otc_account\"}]:[{value:1,label:\"wallet_account\"},{value:2,label:\"trading_account\"}],this.getBalance(),this.value=2,this.transferType(1)}},created:function(){var a=this;return v()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a.getAllCoinTypes(),h.a.RM=0,a.accountTypes2=[],a.accountTypes.forEach(function(t){t.value!==a.accountFrom&&a.accountTypes2.push(t)});case 4:case\"end\":return t.stop()}},t,a)}))()}},m={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"v-modal\",{attrs:{open:e.showModal},on:{\"update:open\":function(t){e.showModal=t},close:e.close,click:e.hideModal}},[n(\"div\",{staticClass:\"modal-exchange-wrapper pd-27\"},[n(\"div\",{staticClass:\"modal-title\"},[e._v(e._s(e.$t(\"account_exchange\")))]),e._v(\" \"),n(\"div\",{staticClass:\"ex-row__label\"},[e._v(e._s(e.$t(\"transfer_to_bibi_account\")))]),e._v(\" \"),n(\"div\",{staticClass:\"ex-row\"},[n(\"div\",{staticClass:\"c-999 mb-13\"},[e._v(e._s(e.$t(\"currency\")))]),e._v(\" \"),n(\"el-select\",{staticClass:\"ex-row__value\",attrs:{\"value-key\":\"currency\",filterable:!0},on:{change:e.changeCoin},model:{value:e.selectCoin,callback:function(t){e.selectCoin=t},expression:\"selectCoin\"}},e._l(e.allCoins,function(t,a){return n(\"el-option\",{key:a,attrs:{label:t.currency,value:t.currency}})}),1)],1),e._v(\" \"),n(\"div\",{staticClass:\"ex-row\"},[n(\"div\",{staticClass:\"ex-row__label\"},[n(\"span\",[e._v(e._s(e.$t(\"transfer_from\")))]),e._v(\" \"),n(\"span\",[e._v(e._s(e.$t(\"account_fund_remained\",{amount:e.totalBalance,unit:e.selectCoin})))])]),e._v(\" \"),n(\"el-select\",{staticClass:\"ex-row__value\",attrs:{\"value-key\":\"name\"},on:{change:function(t){return e.transferType(1)}},model:{value:e.accountFrom,callback:function(t){e.accountFrom=t},expression:\"accountFrom\"}},e._l(e.accountTypes,function(t,a){return n(\"el-option\",{key:a,attrs:{label:e.$t(t.label),value:t.value}})}),1)],1),e._v(\" \"),n(\"div\",{staticClass:\"ex-row\"},[n(\"div\",{staticClass:\"ex-row__label\"},[n(\"span\",[e._v(e._s(e.$t(\"transfer_to\")))]),e._v(\" \"),n(\"span\",[e._v(e._s(e.$t(\"account_can_transfer_amount\",{amount:e.fromAmount,unit:e.selectCoin})))])]),e._v(\" \"),n(\"el-select\",{staticClass:\"ex-row__value\",attrs:{\"value-key\":\"name\"},on:{change:function(t){return e.transferType(2)}},model:{value:e.accountTo,callback:function(t){e.accountTo=t},expression:\"accountTo\"}},e._l(e.accountTypes2,function(t,a){return n(\"el-option\",{key:a,attrs:{label:e.$t(t.label),value:t.value}})}),1)],1),e._v(\" \"),n(\"div\",{staticClass:\"ex-row\"},[n(\"div\",{staticClass:\"ex-row__label\"},[n(\"span\",[e._v(e._s(e.$t(\"amount\")))]),e._v(\" \"),n(\"span\",[e._v(e._s(e.$t(\"account_fund_remained\",{amount:e.toAmount,unit:e.selectCoin})))])]),e._v(\" \"),n(\"div\",{staticClass:\"relative\"},[n(\"div\",{staticClass:\"all c-primary\",on:{click:e.fillAll}},[e._v(e._s(e.$t(\"allin\")))]),e._v(\" \"),n(\"number-input\",{staticClass:\"number-input ex-row__value\",attrs:{scale:8,placeholder:e.$t(\"transfer_enter_amount\")},on:{input:e.inputText},model:{value:e.transferAmount,callback:function(t){e.transferAmount=t},expression:\"transferAmount\"}})],1)]),e._v(\" \"),n(\"div\",{staticClass:\"flex-end\"},[n(\"div\",{staticClass:\"pointer\",on:{click:function(t){return e.close()}}},[e._v(e._s(e.$t(\"cancel\")))]),e._v(\" \"),n(\"v-btn\",{staticStyle:{width:\"104px\",\"margin-left\":\"70px\"},attrs:{label:e.$t(\"confirm\")},on:{click:e.confirm}})],1)])])},staticRenderFns:[]};var b=e(\"C7Lr\")(p,m,!1,function(t){e(\"7G2L\")},\"data-v-053c7985\",null);a.default=b.exports},\"7G2L\":function(t,a){}});"}